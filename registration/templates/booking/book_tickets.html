<!DOCTYPE html>
<html>
    <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
<header>
    <h1>Book Your Tickets</h1>
    <script>
        function generateGuestFields() {
            const numTickets = document.getElementById('id_number_of_tickets').value;
            const numGuests = numTickets - 1;
            const guestFieldsContainer = document.getElementById('guest-fields-container');
            guestFieldsContainer.innerHTML = '';

            for (let i = 1; i <= numGuests; i++) {
                const nameField = document.createElement('input');
                nameField.type = 'text';
                nameField.name = `guest_name_${i}`;
                nameField.placeholder = `Guest ${i} Name`;

                const emailField = document.createElement('input');
                emailField.type = 'email';
                emailField.name = `guest_email_${i}`;
                emailField.placeholder = `Guest ${i} Email`;
                emailField.pattern = '^[a-zA-Z0-9._%+-]+@educbe.ca$';
                emailField.title = 'Please enter a valid CBE email address ending with @educbe.ca.';

                guestFieldsContainer.appendChild(nameField);
                guestFieldsContainer.appendChild(emailField);
                guestFieldsContainer.appendChild(document.createElement('br'));
            }
        }
    </script>
</header>
<body>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}

        <label for="id_number_of_tickets">Number of Guests</label>
        <input type="number" id="id_number_of_tickets" name="number_of_tickets" onchange="generateGuestFields()">

        <div id="guest-fields-container"></div>

        <button type="submit">Submit</button>
    </form>

    {% if form.non_field_errors %}
        <div class="errors">
            {% for error in form.non_field_errors %}
                <p>{{ error }}</p>
            {% endfor %}
        </div>
    {% endif %}
</body>


<style>
    
    header {
        background: white;
    
    }


    body {
        height: 100%;
        background: linear-gradient(90deg, rgba(12,14,61,1) 0%, rgba(55,33,133,1) 46%, rgba(104,74,134,1) 100%);
    }


    h1 {
        text-align: center;
        font-family: 'Roboto', sans-serif;
        font-size: 30px;
        color: black;
        font-weight: 1200;
        padding: 10px;
    
    }

    label {
        text-align: left;
        font-family: 'Roboto', sans-serif;
        font-size: 20px;
        color: white;
        font-weight: bold;
        padding-left: 20px;
        padding: 7px;
    }

    p {
        text-align: left;
        font-family: 'Roboto', sans-serif;
        font-size: 20px;
        color: white;
        font-weight: bold; 
        padding-left: 20px;   
        padding: 7px;
    }

    button {
        background-color: #1f50a7;
        border-radius: 6px;
        border: none;
        color: #ddc1b9;
        padding: 20px 25px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 20px;
        margin: 4px;
        cursor: pointer;
        font-family: 'Roboto', sans-serif;
    }

</style>


</html>
